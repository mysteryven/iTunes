var Dribbble=Dribbble||{};Dribbble.BoostedProfile={id:null,adbutlerStatus:null,placementEl:$(".promoted-user-placement"),initialize:function(t){this.placementLocation=t.placementLocation,this.adbutlerUrl=t.adbutlerUrl,this.shotsPerPage=t.shotsPerPage},load:function(){$.ajax(this.adbutlerUrl,{contentType:"application/x-www-form-urlencoded",type:"GET",noCSRF:!0,complete:this.track.bind(this),error:function(){this.placementEl.remove()}.bind(this),success:function(t){this.adbutlerStatus=t.status,"SUCCESS"==this.adbutlerStatus?this.place(t):this.placementEl.remove()}.bind(this)})},place:function(t){this.id=t.placements.placement_1.body;var e="/designers/promoted/"+this.id+"?"+$.param({placement:this.placementLocation,promoted_uri:t.placements.placement_1.redirect_url});$.ajax(e,{success:this.render.bind(this)})},render:function(t){if("row"==this.placementLocation){if(!Dribbble.PlayerCards)return setTimeout(this.render.bind(this),50,t);var e=$(t.content[0]);this.addClickTracking(e),Dribbble.PlayerCards.fetchInitialShots(e.find("ol.dribbbles"),this.shotsPerPage),$(".user-row-"+this.id).hide(),this.placementEl.replaceWith(e),Dribbble.PlayerCards.update(JSON.parse(t.stats))}else{var i=$(t);this.addClickTracking(i),this.placementEl.replaceWith(i)}},track:function(t,e){var i;i="SUCCESS"==this.adbutlerStatus?"boosted_profile_shown":"NO_ADS"==this.adbutlerStatus?"boosted_profile_no_ad":"boosted_profile_fail",Dribbble.Segment.track(i,{location:this.placementLocation,boosted_user_id:this.id,requestPath:window.location.pathname,status:t.status,message:e})},addClickTracking:function(t){t.find("a.boosted-link").on("click",function(){Dribbble.Segment.track("boosted_profile_click",{location:this.placementLocation,boosted_user_id:this.id})}.bind(this))}};