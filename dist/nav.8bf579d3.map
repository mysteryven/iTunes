{"version":3,"sources":["js/nav.js"],"names":["view","el","template","render","$","html","model","controller","init","selectTab","bindEvents","bindEventHub","eventHub","on","color","c","find","css","e","preventDefault","location","hash","currentTarget","getAttribute","str","currentTab","substring","length","addClass","siblings","removeClass","index","isPlaying","charAt"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACI,MAAIA,IAAI,GAAG;AACPC,IAAAA,EAAE,EAAE,MADG;AAEPC,IAAAA,QAAQ,+uBAFD;AAwBPC,IAAAA,MAxBO,oBAwBE;AACLC,MAAAA,CAAC,CAAC,KAAKH,EAAN,CAAD,CAAWI,IAAX,CAAgB,KAAKH,QAArB;AACH;AA1BM,GAAX;AA6BA,MAAII,KAAK,GAAG,EAAZ;AAEA,MAAIC,UAAU,GAAG;AACbC,IAAAA,IADa,gBACRR,IADQ,EACFM,KADE,EACK;AACd,WAAKN,IAAL,GAAYA,IAAZ;AACA,WAAKM,KAAL,GAAaA,KAAb;AACA,WAAKN,IAAL,CAAUG,MAAV;AACA,WAAKM,SAAL;AACA,WAAKC,UAAL;AACA,WAAKC,YAAL;AACH,KARY;AASbA,IAAAA,YATa,0BASE;AAAA;;AACXC,MAAAA,QAAQ,CAACC,EAAT,CAAY,mBAAZ,EAAiC,UAACC,KAAD,EAAW;AACxC,YAAIC,CAAC,GAAGX,CAAC,CAAC,KAAI,CAACJ,IAAL,CAAUC,EAAX,CAAD,CAAgBe,IAAhB,CAAqB,IAArB,EAA2BC,GAA3B,CAA+B,kBAA/B,EAAmDH,KAAnD,CAAR;AACH,OAFD;AAGH,KAbY;AAcbJ,IAAAA,UAda,wBAcA;AAAA;;AACTN,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBY,IAAhB,CAAqB,qBAArB,EAA4CH,EAA5C,CAA+C,OAA/C,EAAwD,UAACK,CAAD,EAAO;AAC3DA,QAAAA,CAAC,CAACC,cAAF;AAEAC,QAAAA,QAAQ,CAACC,IAAT,GAAgBH,CAAC,CAACI,aAAF,CAAgBC,YAAhB,CAA6B,MAA7B,IAAuC,IAAvD;;AACA,QAAA,MAAI,CAACd,SAAL;AACH,OALD;AAMH,KArBY;AAsBbA,IAAAA,SAtBa,uBAsBD;AACR,UAAIe,GAAG,GAAGJ,QAAQ,CAACC,IAAnB;AACA,UAAII,UAAU,GAAGD,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiBF,GAAG,CAACG,MAAJ,GAAa,CAA9B,KAAoC,IAArD;AACAvB,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBY,IAAhB,CAAqB,MAAMS,UAA3B,EAAuCG,QAAvC,CAAgD,QAAhD,EAA0DC,QAA1D,CAAmE,SAAnE,EAA8EC,WAA9E,CAA0F,QAA1F;AAEA,UAAIC,KAAK,GAAG3B,CAAC,CAAC,MAAMqB,UAAP,CAAD,CAAoBM,KAApB,EAAZ;AACA3B,MAAAA,CAAC,CAAC,QAAD,CAAD,CAAYa,GAAZ,CAAgB;AACZ,0CAA2B,CAACc,KAAD,GAAO,GAAlC;AADY,OAAhB;AAIA,UAAIC,SAAS,GAAGR,GAAG,CAACS,MAAJ,CAAWT,GAAG,CAACG,MAAJ,GAAa,CAAxB,MAA+B,GAA/B,GAAqC,IAArC,GAA4C,KAA5D;;AACA,UAAIK,SAAJ,EAAe;AACX5B,QAAAA,CAAC,CAAC,SAAD,CAAD,CAAawB,QAAb,CAAsB,QAAtB;AACH,OAFD,MAEO;AACHxB,QAAAA,CAAC,CAAC,SAAD,CAAD,CAAa0B,WAAb,CAAyB,QAAzB;AACH;AACJ;AAtCY,GAAjB;AAyCAvB,EAAAA,UAAU,CAACC,IAAX,CAAgBR,IAAhB,EAAsBM,KAAtB;AACH","file":"nav.8bf579d3.map","sourceRoot":"../src","sourcesContent":["{\n    let view = {\n        el: '#nav',\n        template: `\n        <div class=\"status-bar\">\n            <svg class=\"icon wifi\" aria-hidden=\"true\">\n            <use xlink:href=\"#icon-wifi\"></use>\n            </svg>\n            <svg class=\"icon battery\" aria-hidden=\"true\">\n            <use xlink:href=\"#icon-tecbatterycha\"></use>\n            </svg>\n            <span class=\"time\" id=\"timer\"></span>\n        </div>\n        <ul id=\"switchTab\">\n            <li class=\"active\" id=\"my\">\n            <a href=\"/my\">换肤</a>\n            </li>\n            <li id=\"find\">\n            <a href=\"/find\">音乐库</a>\n            </li>\n            <li id=\"search\">\n            <a href=\"/search\">搜索</a>\n            </li>\n        </ul>\n    `,\n        render() {\n            $(this.el).html(this.template)\n        }\n    }\n\n    let model = {}\n\n    let controller = {\n        init(view, model) {\n            this.view = view\n            this.model = model\n            this.view.render()\n            this.selectTab()\n            this.bindEvents()\n            this.bindEventHub()\n        },\n        bindEventHub() {\n            eventHub.on('changeTabBarColor', (color) => {\n                let c = $(this.view.el).find('ul').css('background-color', color)\n            })\n        },\n        bindEvents() {\n            $('.container').find('#switchTab > li > a').on('click', (e) => {\n                e.preventDefault()\n\n                location.hash = e.currentTarget.getAttribute('href') + '-n'\n                this.selectTab()\n            })\n        },\n        selectTab() {\n            let str = location.hash\n            let currentTab = str.substring(2, str.length - 2) || 'my'\n            $('.container').find('#' + currentTab).addClass('active').siblings('.active').removeClass('active')\n\n            let index = $('#' + currentTab).index()\n            $('#pages').css({\n                'transform': `translateX(${-index*390}px)`\n            })\n\n            let isPlaying = str.charAt(str.length - 1) === 'y' ? true : false\n            if (isPlaying) {\n                $('#player').addClass('active')\n            } else {\n                $('#player').removeClass('active')\n            }\n        }\n    }\n\n    controller.init(view, model)\n}"]}