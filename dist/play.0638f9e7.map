{"version":3,"sources":["js/play.js"],"names":["view","el","template","render","$","html","init","$el","model","data","song","audio","controller","bindEvents","bindEventHub","on","e","addClass","beActive","document","querySelector","play","removeClass","pause","disActive","location","hash","replace","window","eventHub","initSong","url","cover","name","artist","find","removeAttr","attr","empty","css"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACI,MAAIA,IAAI,GAAG;AACPC,IAAAA,EAAE,EAAE,SADG;AAEPC,IAAAA,QAAQ,4nCAFD;AAsCPC,IAAAA,MAtCO,oBAsCE;AACLC,MAAAA,CAAC,CAAC,KAAKH,EAAN,CAAD,CAAWI,IAAX,CAAgB,KAAKH,QAArB;AACH,KAxCM;AAyCPI,IAAAA,IAzCO,kBAyCA;AACH,WAAKC,GAAL,GAAWH,CAAC,CAAC,KAAKH,EAAN,CAAZ;AACH;AA3CM,GAAX;AA8CA,MAAIO,KAAK,GAAG;AACRC,IAAAA,IAAI,EAAE;AACFC,MAAAA,IAAI,EAAE,EADJ;AAEFC,MAAAA,KAAK,EAAE;AAFL;AADE,GAAZ;AAOA,MAAIC,UAAU,GAAG;AACbN,IAAAA,IADa,gBACRN,IADQ,EACFQ,KADE,EACK;AACd,WAAKR,IAAL,GAAYA,IAAZ;AACA,WAAKQ,KAAL,GAAaA,KAAb;AACA,WAAKR,IAAL,CAAUG,MAAV;AACA,WAAKH,IAAL,CAAUM,IAAV;AACA,WAAKO,UAAL;AACA,WAAKC,YAAL;AACH,KARY;AASbD,IAAAA,UATa,wBASA;AACTT,MAAAA,CAAC,CAAC,KAAKJ,IAAL,CAAUC,EAAX,CAAD,CAAgBc,EAAhB,CAAmB,OAAnB,EAA4B,aAA5B,EAA2C,UAACC,CAAD,EAAO;AAC9CZ,QAAAA,CAAC,CAAC,SAAD,CAAD,CAAaa,QAAb,CAAsB,SAAtB;AACAC,QAAAA,QAAQ,CAAC,eAAD,CAAR;AACAC,QAAAA,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,EAA+CC,IAA/C;AACH,OAJD;AAMAjB,MAAAA,CAAC,CAAC,KAAKJ,IAAL,CAAUC,EAAX,CAAD,CAAgBc,EAAhB,CAAmB,OAAnB,EAA4B,cAA5B,EAA4C,UAACC,CAAD,EAAO;AAC/CZ,QAAAA,CAAC,CAAC,SAAD,CAAD,CAAakB,WAAb,CAAyB,SAAzB;AACAJ,QAAAA,QAAQ,CAAC,cAAD,CAAR;AACAC,QAAAA,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,EAA+CG,KAA/C;AAEH,OALD;AAOA,WAAKvB,IAAL,CAAUO,GAAV,CAAcQ,EAAd,CAAiB,OAAjB,EAA0B,QAA1B,EAAoC,YAAM;AACtCS,QAAAA,SAAS,CAAC,SAAD,CAAT;AACAC,QAAAA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsB,IAAtB,EAA4B,IAA5B,CAAhB;AACH,OAHD;AAKH,KA5BY;AA6Bbb,IAAAA,YA7Ba,0BA6BE;AAAA;;AACXc,MAAAA,MAAM,CAACC,QAAP,CAAgBd,EAAhB,CAAmB,UAAnB,EAA+B,UAACN,IAAD,EAAU;AACrC,QAAA,KAAI,CAACqB,QAAL,CAAcrB,IAAd;AACH,OAFD;AAIAmB,MAAAA,MAAM,CAACC,QAAP,CAAgBd,EAAhB,CAAmB,WAAnB,EAAgC,UAACN,IAAD,EAAU;AACtCU,QAAAA,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,EAA+CC,IAA/C;AACH,OAFD;AAIAO,MAAAA,MAAM,CAACC,QAAP,CAAgBd,EAAhB,CAAmB,YAAnB,EAAiC,UAACN,IAAD,EAAU;AACvCU,QAAAA,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,EAA+CG,KAA/C;AACH,OAFD;AAGH,KAzCY;AA0CbO,IAAAA,QA1Ca,0BA0CwB;AAAA,UAA3BC,GAA2B,QAA3BA,GAA2B;AAAA,UAAtBC,KAAsB,QAAtBA,KAAsB;AAAA,UAAfC,IAAe,QAAfA,IAAe;AAAA,UAATC,MAAS,QAATA,MAAS;AACjC,WAAKlC,IAAL,CAAUO,GAAV,CAAc4B,IAAd,CAAmB,gBAAnB,EAAqCC,UAArC,CAAgD,KAAhD;AACA,WAAKpC,IAAL,CAAUO,GAAV,CAAc4B,IAAd,CAAmB,gBAAnB,EAAqCE,IAArC,CAA0C,KAA1C,EAAiDN,GAAjD;AAEA3B,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBkC,KAApB;AACA,UAAI3B,KAAK,wBAAiBoB,GAAjB,sCAAT;AACA3B,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBC,IAApB,CAAyBM,KAAzB;AACAQ,MAAAA,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,EAA+CC,IAA/C;AACAjB,MAAAA,CAAC,CAAC,SAAD,CAAD,CAAaa,QAAb,CAAsB,SAAtB;AACAC,MAAAA,QAAQ,CAAC,eAAD,CAAR;AACA,WAAKlB,IAAL,CAAUO,GAAV,CAAc4B,IAAd,CAAmB,cAAnB,EAAmCI,GAAnC,CAAuC;AACnC,0CAA2BP,KAA3B;AADmC,OAAvC;AAIA,WAAKhC,IAAL,CAAUO,GAAV,CAAc4B,IAAd,CAAmB,2BAAnB,EAAgD9B,IAAhD,CAAqD4B,IAArD;AACA,WAAKjC,IAAL,CAAUO,GAAV,CAAc4B,IAAd,CAAmB,6BAAnB,EAAkD9B,IAAlD,CAAuD6B,MAAvD;AACH;AA1DY,GAAjB;AA6DAtB,EAAAA,UAAU,CAACN,IAAX,CAAgBN,IAAhB,EAAsBQ,KAAtB;AACH","file":"play.0638f9e7.map","sourceRoot":"../src","sourcesContent":["{\n    let view = {\n        el: '#player',\n        template: `\n    <div class=\"player-close\">\n    <svg class=\"icon player-arrow\" aria-hidden=\"true\" id=\"close\">\n      <use xlink:href=\"#icon-arrow-down\"></use>\n    </svg>\n    </div>\n  <div id=\"playerCover\" class=\"player-cover\" \n    style=\"background-image: url(../img/cover.jpeg)\"> </div>\n  <div class=\"player-information\">\n    <h2 class='name'>发现好音乐</h2>\n    <div class='artist'></div>\n  </div>\n  <div class=\"player-controllers\">\n    <!--    \n    <svg class=\"icon player-arrow\" aria-hidden=\"true\">\n      <use xlink:href=\"#icon-right-arrow-copy\"></use>\n    </svg>\n    -->\n    <div>\n      <svg class=\"icon player-play\" aria-hidden=\"true\" id=\"playButton\">\n        <use xlink:href=\"#icon-play1\"></use>\n      </svg>\n      <svg class=\"icon player-play\" aria-hidden=\"true\" id=\"pauseButton\">\n        <use xlink:href=\"#icon-pause\"></use>\n      </svg>\n    </div>\n    <!--\n    <svg class=\"icon player-arrow\" aria-hidden=\"true\">\n      <use xlink:href=\"#icon-icverticleright-copy\"></use>\n    </svg>\n    -->\n  </div>\n  <div id=\"songContainer\">\n   \n  </div>\n    `,\n        render() {\n            $(this.el).html(this.template)\n        },\n        init() {\n            this.$el = $(this.el)\n        }\n    }\n\n    let model = {\n        data: {\n            song: {},\n            audio: {}\n        }\n    }\n\n    let controller = {\n        init(view, model) {\n            this.view = view\n            this.model = model\n            this.view.render()\n            this.view.init()\n            this.bindEvents()\n            this.bindEventHub()\n        },\n        bindEvents() {\n            $(this.view.el).on('click', '#playButton', (e) => {\n                $('#player').addClass('playing')\n                beActive('#currentPause')\n                document.querySelector('#songContainer audio').play()\n            })\n\n            $(this.view.el).on('click', '#pauseButton', (e) => {\n                $('#player').removeClass('playing')\n                beActive('#currentPlay')\n                document.querySelector('#songContainer audio').pause()\n                \n            })\n\n            this.view.$el.on('click', '#close', () => {\n                disActive('#player')\n                location.hash = location.hash.replace('-y', '-n')\n            })\n\n        },\n        bindEventHub() {\n            window.eventHub.on('playSong', (data) => {\n                this.initSong(data)\n            })\n\n            window.eventHub.on('playClick', (data) => {\n                document.querySelector('#songContainer audio').play()\n            })\n            \n            window.eventHub.on('pauseClick', (data) => {\n                document.querySelector('#songContainer audio').pause()\n            })\n        },\n        initSong({url, cover, name, artist}) {\n            this.view.$el.find('#songContainer').removeAttr('src')\n            this.view.$el.find('#songContainer').attr('src', url)\n\n            $('#songContainer').empty()\n            let audio = `<audio src=${url} style=\"display: none\"></audio>`\n            $('#songContainer').html(audio)\n            document.querySelector('#songContainer audio').play()\n            $('#player').addClass('playing')\n            beActive('#currentPause')\n            this.view.$el.find('#playerCover').css({\n                'background-image': `url(${cover})`\n            })\n\n            this.view.$el.find('.player-information .name').html(name)\n            this.view.$el.find('.player-information .artist').html(artist)\n        }\n    }\n\n    controller.init(view, model)\n}"]}