{"version":3,"sources":["js/hot-playlist.js"],"names":["view","el","template","init","$el","$","render","playlists","find","empty","map","data","li","id","coverImgUrl","name","append","html","model","getHotPlayList","axios","get","then","response","controller","bindEvents","on","e","index","currentTarget","playlistId","attr","obj","playlistCover","playlistName","tags","join","window","eventHub","emit","addClass","console","log"],"mappings":"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","file":"hot-playlist.79f44968.map","sourceRoot":"../src","sourcesContent":["{\n    let view ={\n        el: '#hotPlayList',\n        template: `\n        <h5>\n            <span>推荐歌单</span>\n            <svg class=\"icon arrow\" aria-hidden=\"true\" id=\"controlSongList\">\n                <use xlink:href=\"#icon-rightarrow\"></use>\n            </svg>\n        </h5>\n        <ul>\n        </ul>\n        `,\n        init() {\n            this.$el = $(this.el)\n        },\n        render(playlists) {\n            if (playlists) {\n                this.$el.find('ul').empty()\n                playlists.map((data) => {\n                    let li = `\n                    <li id=${data.id}>\n                        <img src=${data.coverImgUrl} width=113 height=113>\n                        <div>\n                            <span class=\"playListName\">${data.name}</span>\n                        </div>\n                    </li> \n                    `\n                    this.$el.find('ul').append(li)\n                })\n            } else {\n                this.$el.html(this.template)\n            }\n        }\n    }\n\n    let model = {\n        data: {\n            playlists: []\n        },\n        getHotPlayList() {\n            return axios.get('/top/playlist?limit=9&order=hot').then((response) => {\n                this.data.playlists = response.data.playlists\n            })\n        }\n        \n    }\n\n    let controller = {\n        init(view, model) {\n            this.view = view\n            this.model = model \n            this.view.init()\n            this.view.render()\n            this.model.getHotPlayList().then(()=>{\n                this.view.render(this.model.data.playlists)\n            })\n            this.bindEvents()\n        },\n        bindEvents() {\n            this.view.$el.find('ul').on('click', 'li', (e) => {\n                let index = $(e.currentTarget).index()\n                let playlistId = $(e.currentTarget).attr('id')\n                let obj = {\n                    playlistId: playlistId,\n                    playlistCover: this.model.data.playlists[index].coverImgUrl,\n                    playlistName: this.model.data.playlists[index].name,\n                    tags: this.model.data.playlists[index].tags.join('、')\n                }\n                window.eventHub.emit('openPlaylist', obj)\n                $('.loading').addClass('active')\n                console.log(11)\n\n            })\n        }\n    }\n\n    controller.init(view, model) \n}"]}